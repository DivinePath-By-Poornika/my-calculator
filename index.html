<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mystic Life Predictor</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<style>
  body {
    background: linear-gradient(135deg, #0f0f1a, #1a1a2e);
    color: #fff;
    font-family: 'Poppins', sans-serif;
    overflow-x: hidden;
  }
  .glass-card {
    backdrop-filter: blur(12px);
    background: rgba(255, 255, 255, 0.05);
    border-radius: 20px;
    padding: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    transition: transform 0.3s ease;
  }
  .glass-card:hover {
    transform: translateY(-8px);
  }
  .btn {
    background: linear-gradient(90deg, #7f5af0, #2cb67d);
    color: #fff;
    border: none;
    border-radius: 12px;
    padding: 12px 24px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s ease;
  }
  .btn:hover {
    opacity: 0.9;
  }
  .tarot-card {
    width: 100px;
    height: 160px;
    background: linear-gradient(135deg, #272742, #1f1f34);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 14px;
    transform-style: preserve-3d;
    transition: transform 0.8s;
    cursor: pointer;
  }
  .tarot-card.flip {
    transform: rotateY(180deg);
  }
  .tarot-card .front, .tarot-card .back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
  }
  .tarot-card .back {
    background: #7f5af0;
    transform: rotateY(180deg);
  }
  .section-title {
    font-size: 2rem;
    font-weight: bold;
    text-align: center;
    margin-bottom: 20px;
  }
</style>
</head>
<body class="p-4">
<header class="text-center mb-10">
  <h1 class="text-4xl font-extrabold mb-2">ðŸ”® Mystic Life Predictor</h1>
  <p class="text-lg text-gray-300">Astrology â€¢ Numerology â€¢ Tarot â€¢ AI Insights</p>
</header>

<!-- Input Section -->
<section class="glass-card mb-8">
  <div class="section-title">Enter Your Details</div>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <input id="name" type="text" placeholder="Your Name" class="p-3 rounded bg-gray-800 text-white w-full">
    <input id="dob" type="date" class="p-3 rounded bg-gray-800 text-white w-full">
    <input id="time" type="time" class="p-3 rounded bg-gray-800 text-white w-full">
    <input id="place" type="text" placeholder="Your Birth Place" class="p-3 rounded bg-gray-800 text-white w-full">
  </div>
  <div class="flex justify-center mt-4 gap-4">
    <button onclick="detectLocation()" class="btn">Auto Detect Location</button>
    <button onclick="generateAll()" class="btn">Generate Report</button>
  </div>
  <div class="flex justify-center mt-4 gap-4">
    <label class="text-gray-300"><input type="radio" name="mode" value="offline" checked> Offline Mode</label>
    <label class="text-gray-300"><input type="radio" name="mode" value="free"> Free API Mode</label>
  </div>
</section>

<!-- Results -->
<section id="results" class="space-y-8">
  <!-- Astrology -->
  <div class="glass-card">
    <div class="section-title">Astrology Insights</div>
    <p id="astro-result" class="text-gray-200"></p>
  </div>

  <!-- Numerology -->
  <div class="glass-card">
    <div class="section-title">Numerology Insights</div>
    <p id="num-result" class="text-gray-200"></p>
  </div>

  <!-- Tarot -->
  <div class="glass-card">
    <div class="section-title">Tarot Reading</div>
    <div class="flex flex-wrap gap-4 justify-center" id="tarot-cards"></div>
    <div class="flex justify-center mt-4 gap-4">
      <button onclick="drawTarot(1)" class="btn">1-Card Draw</button>
      <button onclick="drawTarot(3)" class="btn">3-Card Spread</button>
      <button onclick="drawTarot(10)" class="btn">Celtic Cross (10)</button>
    </div>
    <p id="tarot-result" class="text-gray-300 mt-4"></p>
  </div>

  <!-- AI Life Prediction -->
  <div class="glass-card">
    <div class="section-title">AI Life Prediction</div>
    <p id="ai-result" class="text-gray-200">Click "Generate Report" to see AI predictions.</p>
  </div>
</section>

<!-- Download -->
<div class="flex justify-center mt-10">
  <button onclick="downloadReport()" class="btn">Download PDF Report</button>
</div>

<script>
// ===== AUTO LOCATION DETECTION =====
async function detectLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(async (position) => {
      const lat = position.coords.latitude.toFixed(2);
      const lon = position.coords.longitude.toFixed(2);
      document.getElementById('place').value = `Lat: ${lat}, Lon: ${lon}`;
    }, () => {
      alert("Location access denied.");
    });
  }
}

// ===== ASTROLOGY CALCULATIONS =====
function calculateSunSign(month, day) {
  const signs = [
    { sign: "Capricorn", start: [12, 22], end: [1, 19] },
    { sign: "Aquarius", start: [1, 20], end: [2, 18] },
    { sign: "Pisces", start: [2, 19], end: [3, 20] },
    { sign: "Aries", start: [3, 21], end: [4, 19] },
    { sign: "Taurus", start: [4, 20], end: [5, 20] },
    { sign: "Gemini", start: [5, 21], end: [6, 20] },
    { sign: "Cancer", start: [6, 21], end: [7, 22] },
    { sign: "Leo", start: [7, 23], end: [8, 22] },
    { sign: "Virgo", start: [8, 23], end: [9, 22] },
    { sign: "Libra", start: [9, 23], end: [10, 22] },
    { sign: "Scorpio", start: [10, 23], end: [11, 21] },
    { sign: "Sagittarius", start: [11, 22], end: [12, 21] }
  ];
  for (const s of signs) {
    if ((month === s.start[0] && day >= s.start[1]) || (month === s.end[0] && day <= s.end[1])) {
      return s.sign;
    }
  }
}

function calculateDasha(year) {
  const dashas = ["Ketu", "Venus", "Sun", "Moon", "Mars", "Rahu", "Jupiter", "Saturn", "Mercury"];
  const startIndex = year % dashas.length;
  let result = "";
  for (let i = 0; i < dashas.length; i++) {
    result += `${dashas[(startIndex + i) % dashas.length]} â†’ `;
  }
  return result.slice(0, -3);
}

// ===== NUMEROLOGY =====
function calculateNumerology(name, dob) {
  const numbers = {};
  const digits = dob.replace(/[^0-9]/g, '').split('').map(Number);
  numbers.lifePath = digits.reduce((a, b) => a + b, 0);
  while (numbers.lifePath > 9) numbers.lifePath = String(numbers.lifePath).split('').reduce((a, b) => +a + +b, 0);
  numbers.destiny = name.replace(/[^a-zA-Z]/g, '').toUpperCase()
    .split('').reduce((sum, char) => sum + (char.charCodeAt(0) - 64), 0);
  while (numbers.destiny > 9) numbers.destiny = String(numbers.destiny).split('').reduce((a, b) => +a + +b, 0);
  return numbers;
}

// ===== TAROT =====
const tarotDeck = [
  "The Fool", "The Magician", "The High Priestess", "The Empress", "The Emperor",
  "The Hierophant", "The Lovers", "The Chariot", "Strength", "The Hermit",
  "Wheel of Fortune", "Justice", "The Hanged Man", "Death", "Temperance",
  "The Devil", "The Tower", "The Star", "The Moon", "The Sun",
  "Judgement", "The World"
];

function drawTarot(count) {
  const shuffled = tarotDeck.sort(() => 0.5 - Math.random());
  const cards = shuffled.slice(0, count);
  const container = document.getElementById('tarot-cards');
  container.innerHTML = "";
  cards.forEach(card => {
    const div = document.createElement('div');
    div.className = "tarot-card";
    div.innerHTML = `<div class="front">?</div><div class="back">${card}</div>`;
    div.onclick = () => div.classList.toggle('flip');
    container.appendChild(div);
  });
  document.getElementById('tarot-result').innerText = `Your cards: ${cards.join(", ")}`;
}

// ===== AI PREDICTION =====
async function aiPrediction(prompt, mode) {
  if (mode === "free") {
    const res = await fetch(`https://api.simplifiedai.com/predict?query=${encodeURIComponent(prompt)}`);
    const data = await res.json();
    return data.answer || "AI response not available.";
  } else {
    return "Offline Mode: This is a generic interpretation based on astrology, numerology, and tarot.";
  }
}

// ===== GENERATE ALL =====
async function generateAll() {
  const name = document.getElementById('name').value;
  const dob = document.getElementById('dob').value;
  const time = document.getElementById('time').value;
  const place = document.getElementById('place').value;
  const mode = document.querySelector('input[name="mode"]:checked').value;

  const date = new Date(dob);
  const sunSign = calculateSunSign(date.getMonth() + 1, date.getDate());
  const dasha = calculateDasha(date.getFullYear());

  document.getElementById('astro-result').innerHTML = `
    <b>Sun Sign:</b> ${sunSign}<br>
    <b>Dasha Sequence:</b> ${dasha}
  `;

  const num = calculateNumerology(name, dob);
  document.getElementById('num-result').innerHTML = `
    <b>Life Path:</b> ${num.lifePath}<br>
    <b>Destiny Number:</b> ${num.destiny}
  `;

  const prompt = `Predict life for ${name}, born on ${dob} at ${time} in ${place}. Include astrology, numerology, tarot aspects.`;
  const aiText = await aiPrediction(prompt, mode);
  document.getElementById('ai-result').innerText = aiText;
}

// ===== DOWNLOAD REPORT =====
function downloadReport() {
  const astro = document.getElementById('astro-result').innerText;
  const num = document.getElementById('num-result').innerText;
  const tarot = document.getElementById('tarot-result').innerText;
  const ai = document.getElementById('ai-result').innerText;
  const content = `Mystic Life Report\n\nAstrology:\n${astro}\n\nNumerology:\n${num}\n\nTarot:\n${tarot}\n\nAI Prediction:\n${ai}`;
  const blob = new Blob([content], { type: 'text/plain' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = "Life_Report.txt";
  link.click();
}
</script>
</body>
</html>
