<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Divine Astro & Tarot Hub</title>
<style>
/* ===============================
GLOBAL THEME: DARK + GLASSMORPHISM
=============================== */
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at top, #1b0f1a, #0d0813);
  color: #fff;
  overflow-x: hidden;
}

header {
  text-align: center;
  padding: 40px 20px;
  font-size: 2.8rem;
  color: #fff;
  font-weight: bold;
  background: transparent;
}

section {
  width: 90%;
  max-width: 1200px;
  margin: 50px auto;
  padding: 40px;
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(15px);
  box-shadow: 0 8px 32px rgba(0,0,0,0.5);
  position: relative;
  z-index: 1;
  animation: fadeIn 1.5s ease;
}

@keyframes fadeIn {
  from {opacity: 0; transform: translateY(20px);}
  to {opacity: 1; transform: translateY(0);}
}

h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 20px;
  color: #d9b3ff;
}

button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 15px;
  padding: 15px 30px;
  color: #fff;
  font-size: 1.1rem;
  margin: 10px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: inline-block;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}

button:hover {
  background: linear-gradient(135deg, #9c27b0, #673ab7);
  transform: scale(1.05) translateY(-3px);
  box-shadow: 0 8px 24px rgba(156,39,176,0.6);
}

input {
  width: 100%;
  padding: 15px;
  border-radius: 10px;
  border: none;
  margin: 10px 0;
  font-size: 1rem;
  background: rgba(255,255,255,0.1);
  color: #fff;
}

.results {
  margin-top: 20px;
  font-size: 1.2rem;
  background: rgba(255,255,255,0.08);
  padding: 20px;
  border-radius: 15px;
}

/* Tarot card styling */
.tarot-grid {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 20px;
  margin-top: 20px;
}

.tarot-card {
  width: 100px;
  height: 150px;
  background: linear-gradient(135deg, #2a1a33, #3a2244);
  border-radius: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
  font-weight: bold;
  font-size: 0.9rem;
  text-align: center;
  transform-style: preserve-3d;
  transition: transform 0.8s;
  cursor: pointer;
  position: relative;
}

.tarot-card.flipped {
  transform: rotateY(180deg);
}

.tarot-card::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 10px;
  background: rgba(255,255,255,0.05);
}

/* Back face */
.tarot-card .back, .tarot-card .front {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 5px;
}

.tarot-card .back {
  background: linear-gradient(135deg, #9c27b0, #673ab7);
  transform: rotateY(180deg);
}

.ai-section {
  background: linear-gradient(135deg, #1a0933, #2a1a44);
  text-align: center;
  padding: 30px;
  border-radius: 20px;
}

/* Floating particles background effect */
.bg-particles {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 0;
}
.particle {
  position: absolute;
  background: rgba(255,255,255,0.15);
  border-radius: 50%;
  animation: float 10s infinite;
}
@keyframes float {
  0% {transform: translateY(0) translateX(0);}
  50% {transform: translateY(-50px) translateX(50px);}
  100% {transform: translateY(0) translateX(0);}
}
</style>
</head>
<body onload="createParticles(); detectLocation();">
<div class="bg-particles"></div>
<header>ðŸ”® Divine Astrology & Tarot Hub ðŸ”®</header>

<!-- Astrology Section -->
<section>
<h2>Astrology Calculator</h2>
<input type="text" id="name" placeholder="Enter your Name">
<input type="date" id="dob">
<input type="time" id="time">
<input type="text" id="place" placeholder="Place (auto-detected)">
<button onclick="calculateAstrology()">Get Astrology Details</button>
<div class="results" id="astroResults"></div>
</section>

<!-- Numerology Section -->
<section>
<h2>Numerology Calculator</h2>
<button onclick="calculateNumerologyUI()">Calculate Numerology</button>
<div class="results" id="numResults"></div>
</section>

<!-- Tarot Section -->
<section>
<h2>Tarot Reading</h2>
<button onclick="drawTarot(1)">1 Card Spread</button>
<button onclick="drawTarot(3)">3 Card Spread</button>
<button onclick="drawTarot(10)">Celtic Cross</button>
<div class="tarot-grid" id="tarotGrid"></div>
</section>

<!-- AI Life Prediction -->
<section class="ai-section">
<h2>AI Life Prediction</h2>
<select id="aiMode">
<option value="free">Free API Mode</option>
<option value="offline">Offline Mode</option>
</select>
<textarea id="aiQuestion" rows="4" style="width:100%;border-radius:10px;margin:10px 0;padding:10px;"></textarea>
<button onclick="getAIPrediction()">Get AI Prediction</button>
<div class="results" id="aiResults"></div>
</section>

<!-- Download Report -->
<section style="text-align:center;">
<button onclick="downloadReport()">Download Full Report</button>
</section>

<script>
// ==========================
// BACKGROUND PARTICLES
// ==========================
function createParticles() {
  const container = document.querySelector('.bg-particles');
  for (let i = 0; i < 30; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.width = p.style.height = Math.random() * 10 + 'px';
    p.style.top = Math.random() * 100 + '%';
    p.style.left = Math.random() * 100 + '%';
    p.style.animationDuration = (Math.random() * 10 + 5) + 's';
    container.appendChild(p);
  }
}

// ==========================
// AUTO LOCATION DETECTION
// ==========================
function detectLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(pos => {
      document.getElementById('place').value = `Lat:${pos.coords.latitude.toFixed(2)}, Lon:${pos.coords.longitude.toFixed(2)}`;
    });
  }
}

// ==========================
// ASTROLOGY CALCULATIONS
// ==========================
function calculateAstrology() {
  const name = document.getElementById('name').value;
  const dob = document.getElementById('dob').value;
  if (!dob) {
    alert('Please enter DOB');
    return;
  }
  const [year, month, day] = dob.split('-').map(Number);
  const sunSign = calculateSunSign(month, day);
  const dasha = calculateDasha(year);
  document.getElementById('astroResults').innerHTML = `
    <strong>Name:</strong> ${name}<br>
    <strong>Sun Sign:</strong> ${sunSign}<br>
    <strong>Dasha Sequence:</strong> ${dasha}
  `;
}

function calculateSunSign(month, day) {
  const signs = [
    { sign: "Capricorn", start: [12, 22], end: [1, 19] },
    { sign: "Aquarius", start: [1, 20], end: [2, 18] },
    { sign: "Pisces", start: [2, 19], end: [3, 20] },
    { sign: "Aries", start: [3, 21], end: [4, 19] },
    { sign: "Taurus", start: [4, 20], end: [5, 20] },
    { sign: "Gemini", start: [5, 21], end: [6, 20] },
    { sign: "Cancer", start: [6, 21], end: [7, 22] },
    { sign: "Leo", start: [7, 23], end: [8, 22] },
    { sign: "Virgo", start: [8, 23], end: [9, 22] },
    { sign: "Libra", start: [9, 23], end: [10, 22] },
    { sign: "Scorpio", start: [10, 23], end: [11, 21] },
    { sign: "Sagittarius", start: [11, 22], end: [12, 21] }
  ];
  for (const s of signs) {
    if ((month === s.start[0] && day >= s.start[1]) || (month === s.end[0] && day <= s.end[1])) {
      return s.sign;
    }
  }
}

function calculateDasha(year) {
  const dashas = ["Ketu", "Venus", "Sun", "Moon", "Mars", "Rahu", "Jupiter", "Saturn", "Mercury"];
  let start = year % dashas.length;
  let result = "";
  for (let i = 0; i < dashas.length; i++) {
    result += dashas[(start + i) % dashas.length] + " â†’ ";
  }
  return result.slice(0, -3);
}

// ==========================
// NUMEROLOGY CALCULATOR
// ==========================
function calculateNumerologyUI() {
  const name = document.getElementById('name').value;
  const dob = document.getElementById('dob').value;
  if (!dob || !name) {
    alert("Enter Name and DOB");
    return;
  }
  const nums = calculateNumerology(name, dob);
  document.getElementById('numResults').innerHTML = `
    Life Path: ${nums.lifePath}<br>
    Destiny: ${nums.destiny}
  `;
}

function calculateNumerology(name, dob) {
  const numbers = {};
  const digits = dob.replace(/[^0-9]/g, '').split('').map(Number);
  numbers.lifePath = digits.reduce((a, b) => a + b, 0);
  while (numbers.lifePath > 9) numbers.lifePath = String(numbers.lifePath).split('').reduce((a, b) => +a + +b, 0);
  numbers.destiny = name.replace(/[^a-zA-Z]/g, '').toUpperCase()
    .split('').reduce((sum, char) => sum + (char.charCodeAt(0) - 64), 0);
  while (numbers.destiny > 9) numbers.destiny = String(numbers.destiny).split('').reduce((a, b) => +a + +b, 0);
  return numbers;
}

// ==========================
// TAROT READING
// ==========================
const tarotDeck = ["The Fool","The Magician","The High Priestess","The Empress","The Emperor","The Hierophant","The Lovers","The Chariot","Strength","The Hermit","Wheel of Fortune","Justice","The Hanged Man","Death","Temperance","The Devil","The Tower","The Star","The Moon","The Sun","Judgement","The World"];

function drawTarot(count) {
  const grid = document.getElementById('tarotGrid');
  grid.innerHTML = '';
  const shuffled = tarotDeck.sort(() => 0.5 - Math.random());
  for (let i = 0; i < count; i++) {
    const card = document.createElement('div');
    card.className = 'tarot-card';
    card.innerHTML = `<div class="front">?</div><div class="back">${shuffled[i]}</div>`;
    card.addEventListener('click', () => card.classList.toggle('flipped'));
    grid.appendChild(card);
  }
}

// ==========================
// AI PREDICTIONS
// ==========================
async function getAIPrediction() {
  const mode = document.getElementById('aiMode').value;
  const q = document.getElementById('aiQuestion').value;
  let ans = "";
  if (mode === "free") {
    ans = "Using free API... (Demo text as API key required)";
  } else {
    ans = "Offline Mode: Based on your question, your journey ahead holds growth and opportunities.";
  }
  document.getElementById('aiResults').innerText = ans;
}

// ==========================
// DOWNLOAD REPORT
// ==========================
function downloadReport() {
  const astro = document.getElementById('astroResults').innerText;
  const num = document.getElementById('numResults').innerText;
  const ai = document.getElementById('aiResults').innerText;
  const content = `Astrology:\n${astro}\n\nNumerology:\n${num}\n\nAI Prediction:\n${ai}`;
  const blob = new Blob([content], { type: 'text/plain' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'Life_Report.txt';
  link.click();
}
</script>
</body>
</html>
